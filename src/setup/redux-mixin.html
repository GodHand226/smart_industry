<link rel="import" href="/bower_components/polymer-redux/dist/polymer-redux.html">
<script src="/node_modules/redux/dist/redux.min.js"></script>
<script>
    var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

    const initial = {
        machines: [],
        editMachines: []
    };

    const reducer = (state = initial, action) => {
        if (!state) return initial;
        switch (action.type) {
            case 'ADD_MACHINE':
                // If state machine is undefined just initial it
                if (!state.machines) {
                    state.machines = initial.machines;
                }
                const { $key, ...newMachines } = action.machines;
                const newerMachines = _extends({}, newMachines, { mid: action.machines.$key });
                return _extends({}, state, {
                    machines: [...state.machines, newerMachines]
                });
            case 'REMOVE_MACHINE':
                if (state.machines) {
                    return _extends({}, state, {
                        machines: [...state.machines.slice(0, action.index), ...state.machines.slice(action.index + 1)]
                    });
                }
                return state;
            case 'EDIT_ADD_MACHINE':
                // If state machine is undefined just initial it
                if (!state.editMachines) {
                    state.editMachines = initial.editMachines;
                } else if (state.editMachines) {
                    const { $key, ...newEditMachines } = action.editMachines;
                    const newerEditMachines = _extends({}, newEditMachines, { mid: action.editMachines.$key });
                    return _extends({}, state, {
                        editMachines: [...state.editMachines, newerEditMachines]
                    });
                }
                return state;
            case 'EDIT_REMOVE_MACHINE':
                if (state.editMachines) {
                    return _extends({}, state, {
                        editMachines: [...state.editMachines.slice(0, action.index), ...state.editMachines.slice(action.index + 1)]
                    });
                }
                return state;
            case 'EDIT_SET_MACHINE':
                return _extends({}, state, {
                    editMachines: action.editMachines
                });
            case 'CLEAR_MACHINE':
                return [];
            default:
                return state;
        }
    };
    const store = Redux.createStore(reducer);
    const ReduxMixin = PolymerRedux(store);

</script>