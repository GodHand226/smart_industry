<!-- <link rel="import" href="/bower_components/polymer-redux/polymer-redux.html">
<script src="/node_modules/redux/dist/redux.min.js"></script>
<script>
    const initial = {
        machines: [],
        editMachines: []
    };
    // helper function
    const remove = (index, data) => index === 0 ? data.slice(1) : [
        ...data.slice(0, index),
        ...data.slice(index + 1)
    ]
    const reducer = (state = initial, action) => {
        if (!state) return initial;
        switch (action.type) {
            case 'ADD_MACHINE':
                const { $key, ...machines } = action.machines
                return {
                    ...state,
                    machines: [...state.machines, action.machines]
                }
            case 'REMOVE_MACHINE':
                // console.log('removeMachine', action.index, state.machines, remove)
                if (state.machines) {
                    return {
                        ...state,
                        machines: remove(action.index, state.machines)
                    }
                }
                return state
            case 'EDIT_ADD_MACHINE':
                if (state.editMachines) {
                    const { $key, ...editMachines } = action.editMachines
                    return {
                        ...state,
                        editMachines: [...state.editMachines, action.editMachines]
                    }
                }
                return state
            case 'EDIT_REMOVE_MACHINE':
                // console.log('editRemoveMachine', action.index, state.editMachines, remove)
                if (state.editMachines) {
                    return {
                        ...state,
                        editMachines: remove(action.index, state.editMachines)
                    }
                }
                return state
            case 'EDIT_SET_MACHINE':
                return {
                    ...state,
                    editMachines: action.editMachines
                }
            case 'CLEAR_MACHINE':
                return []
            default:
                return state
        }
    };
    const store = Redux.createStore(reducer);
    const ReduxMixin = PolymerRedux(store);
</script> -->